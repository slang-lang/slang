fixed a memleak with forward declarations

